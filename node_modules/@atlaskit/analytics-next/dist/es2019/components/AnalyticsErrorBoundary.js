import React, { Component } from 'react';
import AnalyticsContext from './AnalyticsContext/LegacyAnalyticsContext';
/**
 *  @deprecated
 */
// eslint-disable-next-line @repo/internal/react/no-class-components
export default class AnalyticsErrorBoundary extends Component {
  constructor(props) {
    super(props);
    this.state = {
      hasError: false
    };
  }
  componentDidCatch(error, info) {
    const {
      onError
    } = this.props;
    onError && onError(error, info);
    this.setState({
      hasError: true
    });
  }
  render() {
    const {
      data,
      children,
      ErrorComponent
    } = this.props;
    const {
      hasError
    } = this.state;
    if (hasError) {
      return ErrorComponent ? /*#__PURE__*/React.createElement(AnalyticsContext, {
        data: data
      }, /*#__PURE__*/React.createElement(ErrorComponent, null)) : null;
    }
    return /*#__PURE__*/React.createElement(AnalyticsContext, {
      data: data
    }, children);
  }
}